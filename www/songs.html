<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>All Songs - Kandy Fredrick</title>
<meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width">
<meta property="og:image" content="/img/kandy-og-img.jpg" />
<link rel="stylesheet" type="text/css" href="/inc/main.css">

<body>

<main>
<article>
    <section class="col2">
        <div>
            <h1>All Songs</h1>
            <a href="/music" class="more">Releases</a>
        </div>
        <div>
            <img src="/photo/ab6761670000ecd44440e04613026131c7dc3f6e.jpeg">
        </div>
    </section>
</article>
</main>

<script type="text/javascript" src="/inc/showdown.min.js"></script>
<script type="text/javascript" src="/inc/main.js"></script>
<script>
function songHasStuff(song) {
    if (song.desc || song.lyrics) {
        return true;
    }
    if (song.audio.spotify || song.audio.youtube) {
        return true;
    }
    if (song.video && (song.video.youtube || song.video.fb)) {
        return true;
    }
    return false;
}

function showSongs(songData) {
    var shows = document.querySelector("main article");
    var section = document.createElement("section");
    section.className = "list";

    songData.forEach(function (song) {
        var h3 = document.createElement("h3");
        // only link if more than name, artist, and duration (and genres)
        // That's desc, lyrics, audio, video
        var a = document.createElement("a");
        var artist = document.createElement("span");
        var icon;
        var a;
        if (songHasStuff(song)) {
            a.href = `/song?id=${song.id}`;
            a.textContent = song.name;
            h3.appendChild(a);
            artist.textContent = ` (${song.artist || bandName})`;
            h3.appendChild(artist);
        } else {
            h3.textContent = song.name;
            artist.textContent = ` (${song.artist || bandName})`;
            h3.appendChild(artist);
        }
        if (song.audio.spotify) {
            icon = document.createElement("img");
            icon.src = "/img/social/spotify.svg";
            icon.className = "icon";
            a = document.createElement("a");
            a.href = song.audio.spotify;
            a.title = "Listen on Spotify";
            a.target = "_blank";
            a.appendChild(icon);
            h3.appendChild(a);
        }
        if (song.lyrics) {
            icon = document.createElement("img");
            icon.src = "/img/social/lyrics.svg";
            icon.className = "icon";
            a = document.createElement("a");
            a.href = `/song?id=${song.id}#lyrics`;
            a.title = "Lyrics";
            a.appendChild(icon);
            h3.appendChild(a);
        }
        if (song.video) {
            if (song.video.youtube) {
                icon = document.createElement("img");
                icon.src = "/img/social/youtube.svg";
                icon.className = "icon";
                a = document.createElement("a");
                a.href = song.video.youtube;
                a.title = "Watch on YouTube";
                a.target = "_blank";
                a.appendChild(icon);
                h3.appendChild(a);
            }
            if (song.video.fb) {
                icon = document.createElement("img");
                icon.src = "/img/social/facebook-video.svg";
                icon.className = "icon";
                a = document.createElement("a");
                a.href = song.video.fb;
                a.title = "Watch on Facebook";
                a.target = "_blank";
                a.appendChild(icon);
                h3.appendChild(a);
            }
        }

        section.appendChild(h3);
    });

    shows.appendChild(section);
}

setTitle(function () {
    getJsonData("/api/song", showSongs);
});
</script>
<!-- Go to www.addthis.com/dashboard to customize your tools --> <script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-625ee32c3cd9d087"></script>
